import {format,transports,createLogger}from'winston';import'winston-daily-rotate-file';var r=(e,t)=>`${t}${e}\x1B[0m`;var m=format.combine(format.timestamp(),format(e=>(e.level=e.level.toUpperCase().padStart(7),e))()),a=new transports.Console({format:format.combine(m,format.colorize(),format.printf(e=>{let t=e.message;return [r(e.timestamp,"\x1B[2m"),e.level,r(`[${t.ip??t.socket.remoteAddress??"unknown"}]`,"\x1B[35m"),r(t.method,"\x1B[33m"),t.path].join(" ")}))}),l=new transports.DailyRotateFile({format:format.combine(m,format.printf(e=>{let t=e.message;return [e.timestamp,e.level,`[${t.ip??t.socket.remoteAddress??"unknown"}]`,t.method,t.path].join(" ")})),auditFile:"logs/.audit",filename:"logs/%DATE%.log",maxFiles:"28d"}),x=createLogger({level:"debug",transports:[a,l],handleExceptions:true,handleRejections:true});export{x as logger};